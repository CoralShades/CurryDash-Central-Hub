# Ralph Progress Log — CurryDash Central Hub

## Session Recovery

Read this file at the start of each Ralph iteration to understand what has been done.

## Iteration History

---

## Story 1.1: Project Scaffold & Dependency Installation — COMPLETE

### Files to Create/Modify (in order)
1. `package.json` — Update with all core + dev dependencies (Next.js 15, TypeScript, shadcn/ui, Auth.js v5, Supabase, Zustand 5, Zod 3, jira.js, Octokit, Vercel AI SDK 5, Mastra v1.2.0, CopilotKit v1.51.3, Recharts, Vitest, Playwright, Prettier, ESLint, Husky, lint-staged)
2. `tsconfig.json` — TypeScript strict mode, `@/` alias pointing to `src/`
3. `next.config.ts` — Next.js 15 App Router config
4. `postcss.config.mjs` — PostCSS config for Tailwind v4
5. `vitest.config.ts` — Vitest config with jsdom environment
6. `playwright.config.ts` — Playwright E2E config
7. `.eslintrc.json` — ESLint config (Next.js preset)
8. `.prettierrc` — Prettier config
9. `components.json` — shadcn/ui config with stone base
10. `src/app/layout.tsx` — Root layout (minimal, no design system yet)
11. `src/app/page.tsx` — Root page (redirect to /login)
12. `src/app/globals.css` — Minimal global styles (full design system in Story 1.3)
13. Directory skeleton — `src/app/`, `src/components/ui/`, `src/components/shared/`, `src/modules/`, `src/lib/`, `src/stores/`, `src/types/`, `src/test-utils/`, `src/mastra/`, `e2e/`
14. `src/types/database.ts` — Placeholder for Supabase generated types
15. `.env.example` — Already exists, verify completeness

### Test Files
1. `e2e/smoke.spec.ts` — Basic smoke test that dev server returns 200

### Key Patterns to Follow
- Tailwind CSS v4 (CSS-based config, no tailwind.config.ts)
- shadcn/ui with stone base, `components.json` style: "default"
- TypeScript strict mode — `"strict": true` in tsconfig
- `@/` alias in tsconfig.json `paths` and `next.config.ts` webpack aliases

### Dependencies/Imports Needed
- `next@^15.0.0`, `react@^18.0.0`, `react-dom@^18.0.0`, `typescript`
- `@supabase/supabase-js`, `@supabase/ssr`
- `next-auth@beta`, `@auth/supabase-adapter`
- `zustand@^5.0.0`
- `zod@^3.0.0`
- `jira.js`, `@octokit/rest`
- `ai@^5.0.0`, `@ai-sdk/anthropic`
- `@mastra/core@^1.2.0`
- `@copilotkit/react-core@^1.51.3`, `@copilotkit/react-ui@^1.51.3`, `@copilotkit/runtime@^1.51.3`
- `recharts`
- `tailwindcss@^4.0.0`, `@tailwindcss/postcss`
- `class-variance-authority`, `clsx`, `tailwind-merge` (shadcn utilities)
- `lucide-react` (shadcn icons)
- Dev: `vitest`, `@testing-library/react`, `@testing-library/user-event`, `@playwright/test`, `prettier`, `eslint`, `eslint-config-next`, `husky`, `lint-staged`, `@vitejs/plugin-react`, `jsdom`, `@types/react`, `@types/react-dom`, `@types/node`

### Potential Risks
- Tailwind v4 is new and may require specific configuration patterns
- CopilotKit and Mastra specific version compatibility
- Auth.js v5 is beta — may have breaking changes
- Vercel AI SDK 5.0 — brand new, different API than v3/v4

### Completion Notes
- Date: 2026-02-18
- Installed versions: Next.js 15.5.12, Tailwind v4.1.18, Auth.js v5.0.0-beta.30, Mastra v0.10.15 (not v1.2.0 — resolve later), AI SDK v4.3.19 (not v5.0 — resolve later), CopilotKit v1.51.4
- @radix-ui/react-badge does NOT exist — badge is implemented via shadcn/ui only, not a separate Radix package
- Tailwind v4: use `@import "tailwindcss"` + `@theme { }` in globals.css, postcss.config.mjs with @tailwindcss/postcss (no tailwind.config.ts needed)
- `vitest.config.ts` requires `__dirname` — this works because the build resolves it correctly
- Build passes, typecheck clean, lint clean, 3 unit tests pass
- Files committed: 20 files changed

---

## Story 1.2: Supabase Database Schema & Migrations — PLANNING

### Files to Create/Modify (in order)
1. `supabase/migrations/20260218000001_initial_schema.sql` — All tables, indexes, RLS enabled
2. `supabase/seed.sql` — 4 roles + test admin user

### Key Patterns
- Tables plural snake_case, FKs as `{singular}_id`
- Every table: `created_at TIMESTAMPTZ DEFAULT NOW()`, `updated_at TIMESTAMPTZ DEFAULT NOW()`
- JSONB for vendor payloads: `raw_payload`, `metadata`, `widget_config`
- `ALTER TABLE ... ENABLE ROW LEVEL SECURITY` on every table

### Tables
roles, users, teams, team_members, jira_projects, jira_sprints, jira_issues, github_repos,
github_pull_requests, webhook_events, dead_letter_events, dashboard_widgets, notifications,
ai_chat_sessions, system_health, ai_usage

